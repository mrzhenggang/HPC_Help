
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>作业运行问题 &#8212; HPC Help v1.0 文档</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="存储问题" href="storage.html" />
    <link rel="prev" title="编译问题" href="compile.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="storage.html" title="存储问题"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="compile.html" title="编译问题"
             accesskey="P">上一页</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HPC Help v1.0 文档</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">內容目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">作业运行问题</a><ul>
<li><a class="reference internal" href="#yhi-idle">为什么我用 <code class="docutils literal notranslate"><span class="pre">yhi</span></code> 命令看到很多 idle 的节点，但是我提交作业后，作业不能立即执行？</a></li>
<li><a class="reference internal" href="#yhrun">我用 <code class="docutils literal notranslate"><span class="pre">yhrun</span></code> 提交完作业以后，网络或终端断掉后，我的作业也相应停止</a></li>
<li><a class="reference internal" href="#g-48g">请问您们的系统上的内存最大是多少 G? 我的并行程序需要使用 48G 或更大一些内存怎么办？</a></li>
<li><a class="reference internal" href="#due-to-time-limit">请问我们的计算任务到某一时刻自动终止了，提示是有节点  <code class="docutils literal notranslate"><span class="pre">due</span> <span class="pre">to</span> <span class="pre">time</span> <span class="pre">limit</span></code> 而终止程序，请问贵中心的计算任务是有时间限制的吗？</a></li>
<li><a class="reference internal" href="#slurm-out">任务提交后显示在计算，然后任务消失，也没有输出  <code class="docutils literal notranslate"><span class="pre">slurm-*-out</span></code>文件</a></li>
<li><a class="reference internal" href="#">任务突然运行速度变慢</a></li>
<li><a class="reference internal" href="#disk-quota-exceeded">任务输出结果总是显示 <code class="docutils literal notranslate"><span class="pre">Disk</span> <span class="pre">quota</span> <span class="pre">exceeded</span></code></a></li>
<li><a class="reference internal" href="#error-while-loading-shared-libraries-libxxx-so-cannot-openshared-object-file-no-such-file-or-directory">运行作业提示 <code class="docutils literal notranslate"><span class="pre">error</span> <span class="pre">while</span> <span class="pre">loading</span> <span class="pre">shared</span> <span class="pre">libraries:</span> <span class="pre">libXXX.so:</span> <span class="pre">cannot</span> <span class="pre">openshared</span> <span class="pre">object</span> <span class="pre">file:</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code></a></li>
<li><a class="reference internal" href="#couldnt-chdir-to-vol-th-home-daix-no-such-file-or-directory-going-to-tmp-instead">作业运行时提示：<code class="docutils literal notranslate"><span class="pre">couldn’t</span> <span class="pre">chdir</span> <span class="pre">to</span> <span class="pre">'/vol-th/home/daix':</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory:</span> <span class="pre">going</span> <span class="pre">to</span> <span class="pre">/tmp</span> <span class="pre">instead</span></code></a></li>
<li><a class="reference internal" href="#bc-command-not-found">在计算节点上运行程序，找不到某些命令，比如说提示 <code class="docutils literal notranslate"><span class="pre">bc:</span> <span class="pre">Command</span> <span class="pre">not</span> <span class="pre">found</span></code></a></li>
<li><a class="reference internal" href="#pbs-pbs-nodeline-th-1a">PBS 作业系统里查看运行的节点名称的变量 <code class="docutils literal notranslate"><span class="pre">$PBS_NODELINE</span></code>，在 TH-1A 里对应哪一个变量?</a></li>
<li><a class="reference internal" href="#yhbatch-error-batch-job-submission-failed-user-s-group-not-permitted-to-use-this-partition">提交作业后，提示 <code class="docutils literal notranslate"><span class="pre">yhbatch:</span> <span class="pre">error:</span> <span class="pre">Batch</span> <span class="pre">job</span> <span class="pre">submission</span> <span class="pre">failed:</span> <span class="pre">User's</span> <span class="pre">group</span> <span class="pre">not</span> <span class="pre">permitted</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">this</span> <span class="pre">partition</span></code></a></li>
<li><a class="reference internal" href="#yhq-r">任务提交运行后，有时在还未达到队列的时间天数期限时，运行的程序已“停止工作”（输出文件没有更新），但是通过作业查询命令 <code class="docutils literal notranslate"><span class="pre">yhq</span></code> 查看，作业看起还在  <code class="docutils literal notranslate"><span class="pre">R</span></code> 运行</a></li>
<li><a class="reference internal" href="#slurmd-cn4234-cannot-send-after-transport-endpoint-shutdown">运行作业报错 <code class="docutils literal notranslate"><span class="pre">slurmd[cn4234]:</span> <span class="pre">Cannot</span> <span class="pre">send</span> <span class="pre">after</span> <span class="pre">transport</span> <span class="pre">endpoint</span> <span class="pre">shutdown</span></code></a></li>
<li><a class="reference internal" href="#yhrun-error-task-launch-for-2440965-0-failed-on-node-cn2892-job-credential-expired">运行作业报错 <code class="docutils literal notranslate"><span class="pre">yhrun:</span> <span class="pre">error:</span> <span class="pre">Task</span> <span class="pre">launch</span> <span class="pre">for</span> <span class="pre">2440965.0</span> <span class="pre">failed</span> <span class="pre">on</span> <span class="pre">node</span> <span class="pre">cn2892:</span> <span class="pre">Job</span> <span class="pre">credential</span> <span class="pre">expired</span></code></a></li>
<li><a class="reference internal" href="#forrtl-severe-41-insufficient-virtual-memory">运行作业报错 <code class="docutils literal notranslate"><span class="pre">forrtl:</span> <span class="pre">severe</span> <span class="pre">(41):</span> <span class="pre">insufficient</span> <span class="pre">virtual</span> <span class="pre">memory</span></code></a></li>
<li><a class="reference internal" href="#yhbatch-error-batch-job-submission-failed-batch-job-violates-accounting-qos-policy-job-submit-limit-user-s-size-and-or-time-limits">提交作业报错 <code class="docutils literal notranslate"><span class="pre">yhbatch:</span> <span class="pre">error:</span> <span class="pre">Batch</span> <span class="pre">job</span> <span class="pre">submission</span> <span class="pre">failed:</span> <span class="pre">Batch</span> <span class="pre">job</span> <span class="pre">violates</span> <span class="pre">accounting/QOS</span> <span class="pre">policy(job</span> <span class="pre">submit</span> <span class="pre">limit,</span> <span class="pre">user's</span> <span class="pre">size</span> <span class="pre">and/or</span> <span class="pre">time</span> <span class="pre">limits)</span></code></a></li>
<li><a class="reference internal" href="#s-pd-nodelist-partitiondown">提交的在运行的工作，刚刚发现状态都变显示为 <code class="docutils literal notranslate"><span class="pre">S</span></code>，另外，其他几个显示 <code class="docutils literal notranslate"><span class="pre">PD</span></code> 的工作，<code class="docutils literal notranslate"><span class="pre">NODELIST</span></code> 也显示为 <code class="docutils literal notranslate"><span class="pre">PartitionDown</span></code> 。不知是否是由于中心在做一些维护所致，这会影响这些工作的运行吗？</a></li>
<li><a class="reference internal" href="#cg">作业运行的状态为 CG,自己也杀不掉这个作业，是否影响我的使用，这个问题如何解决？</a></li>
<li><a class="reference internal" href="#slurm-yhrun-got-sigcont">输出的 slurm 文件中是如下数据：<code class="docutils literal notranslate"><span class="pre">yhrun:</span> <span class="pre">got</span> <span class="pre">SIGCONT</span></code> 。我在天河服务器用户手册上没找到这条数据的解释。请问这条数据代表什么意思?</a></li>
<li><a class="reference internal" href="#software-mpi-slurm">使用天河 <code class="docutils literal notranslate"><span class="pre">software</span></code> 目录下的一个 mpi 实现编译程序，运行时 slurm 文件中提示报错</a></li>
<li><a class="reference internal" href="#fatal-error-this-program-was-not-built-to-run-in-your-system">程序运行报错：<code class="docutils literal notranslate"><span class="pre">Fatal</span> <span class="pre">Error:</span> <span class="pre">This</span> <span class="pre">program</span> <span class="pre">was</span> <span class="pre">not</span> <span class="pre">built</span> <span class="pre">to</span> <span class="pre">run</span> <span class="pre">in</span> <span class="pre">your</span> <span class="pre">system.</span></code></a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="compile.html"
                        title="上一章">编译问题</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="storage.html"
                        title="下一章">存储问题</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/jobrun.md.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="">
<span id="id1"></span><h1>作业运行问题<a class="headerlink" href="#" title="永久链接至标题">¶</a></h1>
<div class="section" id="yhi-idle">
<span id="yhi-idle"></span><h2>为什么我用 <code class="docutils literal notranslate"><span class="pre">yhi</span></code> 命令看到很多 idle 的节点，但是我提交作业后，作业不能立即执行？<a class="headerlink" href="#yhi-idle" title="永久链接至标题">¶</a></h2>
<p>TH-1A 的作业调度原则是先来先服务，因为已经有用户优先于您提交作业并且已经在排队，所以 idle 的节点需要优先分配给优先提交作业的用户，即使用户提交作业需求节点数小于空余节点数，仍然因为先来先服务原则，处于等待状态。</p>
</div>
<div class="section" id="yhrun">
<span id="yhrun"></span><h2>我用 <code class="docutils literal notranslate"><span class="pre">yhrun</span></code> 提交完作业以后，网络或终端断掉后，我的作业也相应停止<a class="headerlink" href="#yhrun" title="永久链接至标题">¶</a></h2>
<p>请您使用 <code class="docutils literal notranslate"><span class="pre">yhbatch</span></code> 命令提交作业，这样您就不会出现网络或终端断掉后作业停止的现象。</p>
</div>
<div class="section" id="g-48g">
<span id="g-48g"></span><h2>请问您们的系统上的内存最大是多少 G? 我的并行程序需要使用 48G 或更大一些内存怎么办？<a class="headerlink" href="#g-48g" title="永久链接至标题">¶</a></h2>
<p>TH-1A 系统的每个常规计算节点上的内存是 24G，如果您的并行程序需要比 24G 大的内存，您可以通过使用更多的节点来分散您的内存的使用。目前已升级部分计算节点的内存至 48G，如有需求可直接联系我们。另外，HPC1 系统的节点内存是 128G，用户也可选择使用该系统。</p>
</div>
<div class="section" id="due-to-time-limit">
<span id="due-to-time-limit"></span><h2>请问我们的计算任务到某一时刻自动终止了，提示是有节点  <code class="docutils literal notranslate"><span class="pre">due</span> <span class="pre">to</span> <span class="pre">time</span> <span class="pre">limit</span></code> 而终止程序，请问贵中心的计算任务是有时间限制的吗？<a class="headerlink" href="#due-to-time-limit" title="永久链接至标题">¶</a></h2>
<p>我们的 TH-1A 系统的队列是有时间限制的，命令行下输入 <code class="docutils literal notranslate"><span class="pre">yhi</span></code>，输出结果的第三列 TIMELIMIT 即为不同分区下的最大作业运行限制。请您经常查看作业运行状态，以确保您的作业在正常运行。</p>
</div>
<div class="section" id="slurm-out">
<span id="slurm-out"></span><h2>任务提交后显示在计算，然后任务消失，也没有输出  <code class="docutils literal notranslate"><span class="pre">slurm-*-out</span></code>文件<a class="headerlink" href="#slurm-out" title="永久链接至标题">¶</a></h2>
<p>其所在分区存储设备可能没有挂载，请联系系统管理员。</p>
</div>
<div class="section" id="">
<span id="id2"></span><h2>任务突然运行速度变慢<a class="headerlink" href="#" title="永久链接至标题">¶</a></h2>
<p>可能是该任务使用的计算节点内存报错，可换其他节点重新提交任务。</p>
</div>
<div class="section" id="disk-quota-exceeded">
<span id="disk-quota-exceeded"></span><h2>任务输出结果总是显示 <code class="docutils literal notranslate"><span class="pre">Disk</span> <span class="pre">quota</span> <span class="pre">exceeded</span></code><a class="headerlink" href="#disk-quota-exceeded" title="永久链接至标题">¶</a></h2>
<p>首先查询磁 1 盘空间是否超限（查询命令参见存储问题第 2 点），如果未超限，系统有时会误报超限，在每个月的定期维护时会解决掉这个问题。</p>
</div>
<div class="section" id="error-while-loading-shared-libraries-libxxx-so-cannot-openshared-object-file-no-such-file-or-directory">
<span id="error-while-loading-shared-libraries-libxxx-so-cannot-openshared-object-file-no-such-file-or-directory"></span><h2>运行作业提示 <code class="docutils literal notranslate"><span class="pre">error</span> <span class="pre">while</span> <span class="pre">loading</span> <span class="pre">shared</span> <span class="pre">libraries:</span> <span class="pre">libXXX.so:</span> <span class="pre">cannot</span> <span class="pre">openshared</span> <span class="pre">object</span> <span class="pre">file:</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code><a class="headerlink" href="#error-while-loading-shared-libraries-libxxx-so-cannot-openshared-object-file-no-such-file-or-directory" title="永久链接至标题">¶</a></h2>
<p>在计算时找不到动态库是因为计算节点和登陆节点的软件环境有所不同。链接器在处理动态库时将链接时路径（Link-time path）和运行时路径（Run-time path）分开，<code class="docutils literal notranslate"><span class="pre">-L</span></code> 只是指定了程序链接时库的路径，并不影响程序执行时库的路径；<code class="docutils literal notranslate"><span class="pre">-Wl,-rpath</span></code> 指定程序运行时库的路径，该库的路径信息保存在可执行文件中，运行时它会直接到该路径查找库；也可使用 <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> 环境变量来指定动态库在运行时的搜索路径。</p>
</div>
<div class="section" id="couldnt-chdir-to-vol-th-home-daix-no-such-file-or-directory-going-to-tmp-instead">
<span id="couldnt-chdir-to-vol-th-home-daix-no-such-file-or-directory-going-to-tmp-instead"></span><h2>作业运行时提示：<code class="docutils literal notranslate"><span class="pre">couldn’t</span> <span class="pre">chdir</span> <span class="pre">to</span> <span class="pre">'/vol-th/home/daix':</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory:</span> <span class="pre">going</span> <span class="pre">to</span> <span class="pre">/tmp</span> <span class="pre">instead</span></code><a class="headerlink" href="#couldnt-chdir-to-vol-th-home-daix-no-such-file-or-directory-going-to-tmp-instead" title="永久链接至标题">¶</a></h2>
<p>原因为所使用的计算队列无法访问用户所在的 <code class="docutils literal notranslate"><span class="pre">/vol-th</span></code> 目录，即所使用的计算队列没有挂载到 <code class="docutils literal notranslate"><span class="pre">/vol-th</span></code> 目录。解决方法：将问题报告给请联系系统管理员。</p>
</div>
<div class="section" id="bc-command-not-found">
<span id="bc-command-not-found"></span><h2>在计算节点上运行程序，找不到某些命令，比如说提示 <code class="docutils literal notranslate"><span class="pre">bc:</span> <span class="pre">Command</span> <span class="pre">not</span> <span class="pre">found</span></code><a class="headerlink" href="#bc-command-not-found" title="永久链接至标题">¶</a></h2>
<p>复制登录节点上的  <code class="docutils literal notranslate"><span class="pre">bc</span></code> 命令到自己账户下，设置好该命令的环境变量后，重新运行就可以找到命令。</p>
</div>
<div class="section" id="pbs-pbs-nodeline-th-1a">
<span id="pbs-pbs-nodeline-th-1a"></span><h2>PBS 作业系统里查看运行的节点名称的变量 <code class="docutils literal notranslate"><span class="pre">$PBS_NODELINE</span></code>，在 TH-1A 里对应哪一个变量?<a class="headerlink" href="#pbs-pbs-nodeline-th-1a" title="永久链接至标题">¶</a></h2>
<p>可以试试天河上的作业调度获取节点的变量 <code class="docutils literal notranslate"><span class="pre">$SLURM_NPROCS</span></code> ，它与PBS 的 <code class="docutils literal notranslate"><span class="pre">$PBS_NODELINE</span></code> 是一样的功能。</p>
</div>
<div class="section" id="yhbatch-error-batch-job-submission-failed-user-s-group-not-permitted-to-use-this-partition">
<span id="yhbatch-error-batch-job-submission-failed-user-s-group-not-permitted-to-use-this-partition"></span><h2>提交作业后，提示 <code class="docutils literal notranslate"><span class="pre">yhbatch:</span> <span class="pre">error:</span> <span class="pre">Batch</span> <span class="pre">job</span> <span class="pre">submission</span> <span class="pre">failed:</span> <span class="pre">User's</span> <span class="pre">group</span> <span class="pre">not</span> <span class="pre">permitted</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">this</span> <span class="pre">partition</span></code><a class="headerlink" href="#yhbatch-error-batch-job-submission-failed-user-s-group-not-permitted-to-use-this-partition" title="永久链接至标题">¶</a></h2>
<p>您提交作业 <code class="docutils literal notranslate"><span class="pre">-p</span></code> 参数后面指定的队列名称错误，请检查您可以使用的队列。</p>
</div>
<div class="section" id="yhq-r">
<span id="yhq-r"></span><h2>任务提交运行后，有时在还未达到队列的时间天数期限时，运行的程序已“停止工作”（输出文件没有更新），但是通过作业查询命令 <code class="docutils literal notranslate"><span class="pre">yhq</span></code> 查看，作业看起还在  <code class="docutils literal notranslate"><span class="pre">R</span></code> 运行<a class="headerlink" href="#yhq-r" title="永久链接至标题">¶</a></h2>
<p>遇到这个情况，请您及时手动杀掉您的作业，从断掉的地方接着续算就可以了。</p>
</div>
<div class="section" id="slurmd-cn4234-cannot-send-after-transport-endpoint-shutdown">
<span id="slurmd-cn4234-cannot-send-after-transport-endpoint-shutdown"></span><h2>运行作业报错 <code class="docutils literal notranslate"><span class="pre">slurmd[cn4234]:</span> <span class="pre">Cannot</span> <span class="pre">send</span> <span class="pre">after</span> <span class="pre">transport</span> <span class="pre">endpoint</span> <span class="pre">shutdown</span></code><a class="headerlink" href="#slurmd-cn4234-cannot-send-after-transport-endpoint-shutdown" title="永久链接至标题">¶</a></h2>
<p>请重新提交作业，并同时使用 <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">cn4234</span></code> 把这个节点过滤掉不使用就可以了。</p>
</div>
<div class="section" id="yhrun-error-task-launch-for-2440965-0-failed-on-node-cn2892-job-credential-expired">
<span id="yhrun-error-task-launch-for-2440965-0-failed-on-node-cn2892-job-credential-expired"></span><h2>运行作业报错 <code class="docutils literal notranslate"><span class="pre">yhrun:</span> <span class="pre">error:</span> <span class="pre">Task</span> <span class="pre">launch</span> <span class="pre">for</span> <span class="pre">2440965.0</span> <span class="pre">failed</span> <span class="pre">on</span> <span class="pre">node</span> <span class="pre">cn2892:</span> <span class="pre">Job</span> <span class="pre">credential</span> <span class="pre">expired</span></code><a class="headerlink" href="#yhrun-error-task-launch-for-2440965-0-failed-on-node-cn2892-job-credential-expired" title="永久链接至标题">¶</a></h2>
<p>请重新提交作业，并同时使用 <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">cn2892</span></code> 把这个节点过滤掉不使用就可以了。</p>
</div>
<div class="section" id="forrtl-severe-41-insufficient-virtual-memory">
<span id="forrtl-severe-41-insufficient-virtual-memory"></span><h2>运行作业报错 <code class="docutils literal notranslate"><span class="pre">forrtl:</span> <span class="pre">severe</span> <span class="pre">(41):</span> <span class="pre">insufficient</span> <span class="pre">virtual</span> <span class="pre">memory</span></code><a class="headerlink" href="#forrtl-severe-41-insufficient-virtual-memory" title="永久链接至标题">¶</a></h2>
<p>运行作业的内存不够用了，请尝试多使用节点，每个节点上少使用核数来提交运行。</p>
</div>
<div class="section" id="yhbatch-error-batch-job-submission-failed-batch-job-violates-accounting-qos-policy-job-submit-limit-user-s-size-and-or-time-limits">
<span id="yhbatch-error-batch-job-submission-failed-batch-job-violates-accounting-qos-policy-job-submit-limit-user-s-size-and-or-time-limits"></span><h2>提交作业报错 <code class="docutils literal notranslate"><span class="pre">yhbatch:</span> <span class="pre">error:</span> <span class="pre">Batch</span> <span class="pre">job</span> <span class="pre">submission</span> <span class="pre">failed:</span> <span class="pre">Batch</span> <span class="pre">job</span> <span class="pre">violates</span> <span class="pre">accounting/QOS</span> <span class="pre">policy(job</span> <span class="pre">submit</span> <span class="pre">limit,</span> <span class="pre">user's</span> <span class="pre">size</span> <span class="pre">and/or</span> <span class="pre">time</span> <span class="pre">limits)</span></code><a class="headerlink" href="#yhbatch-error-batch-job-submission-failed-batch-job-violates-accounting-qos-policy-job-submit-limit-user-s-size-and-or-time-limits" title="永久链接至标题">¶</a></h2>
<p>您没有提交作业的权限，请联系工程师，为您开通权限。</p>
</div>
<div class="section" id="s-pd-nodelist-partitiondown">
<span id="s-pd-nodelist-partitiondown"></span><h2>提交的在运行的工作，刚刚发现状态都变显示为 <code class="docutils literal notranslate"><span class="pre">S</span></code>，另外，其他几个显示 <code class="docutils literal notranslate"><span class="pre">PD</span></code> 的工作，<code class="docutils literal notranslate"><span class="pre">NODELIST</span></code> 也显示为 <code class="docutils literal notranslate"><span class="pre">PartitionDown</span></code> 。不知是否是由于中心在做一些维护所致，这会影响这些工作的运行吗？<a class="headerlink" href="#s-pd-nodelist-partitiondown" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">S</span></code> 状态是系统管理员正在维护系统，临时挂起用户作业后显示的状态。原来显示 <code class="docutils literal notranslate"><span class="pre">PD</span></code> 状态的变成 <code class="docutils literal notranslate"><span class="pre">PartitionDown</span></code> 状态是不影响工作运行。</p>
</div>
<div class="section" id="cg">
<span id="cg"></span><h2>作业运行的状态为 CG,自己也杀不掉这个作业，是否影响我的使用，这个问题如何解决？<a class="headerlink" href="#cg" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">CG</span></code> 状态是作业正在退出，用户如果杀不掉这些 <code class="docutils literal notranslate"><span class="pre">CG</span></code> 状态的作业也没关系，它并不影响您的使用，管理员会集中定期处理这个 <code class="docutils literal notranslate"><span class="pre">CG</span></code> 状态的作业。</p>
</div>
<div class="section" id="slurm-yhrun-got-sigcont">
<span id="slurm-yhrun-got-sigcont"></span><h2>输出的 slurm 文件中是如下数据：<code class="docutils literal notranslate"><span class="pre">yhrun:</span> <span class="pre">got</span> <span class="pre">SIGCONT</span></code> 。我在天河服务器用户手册上没找到这条数据的解释。请问这条数据代表什么意思?<a class="headerlink" href="#slurm-yhrun-got-sigcont" title="永久链接至标题">¶</a></h2>
<p>这个是系统管理员临时维护系统，为了避免影响用户的作业，而把用户的作业挂起了出现的提示了。</p>
</div>
<div class="section" id="software-mpi-slurm">
<span id="software-mpi-slurm"></span><h2>使用天河 <code class="docutils literal notranslate"><span class="pre">software</span></code> 目录下的一个 mpi 实现编译程序，运行时 slurm 文件中提示报错<a class="headerlink" href="#software-mpi-slurm" title="永久链接至标题">¶</a></h2>
<p>报错问题：使用天河 <code class="docutils literal notranslate"><span class="pre">software</span></code> 目录下的一个 mpi 实现编译程序，运行时 slurm 文件中提示报错。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GLEX_ERR</span><span class="p">(</span><span class="n">cn1368</span><span class="p">):</span> <span class="n">_Progress</span><span class="p">(</span><span class="mi">172</span><span class="p">),</span> <span class="n">err</span>
<span class="n">CQE</span><span class="p">:</span><span class="n">status</span><span class="o">=</span><span class="n">Dest_Key</span><span class="p">:</span><span class="n">opcode</span><span class="o">=</span><span class="n">RDMA_WRITE</span><span class="p">:</span><span class="n">signaled</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span><span class="n">rmt_nic_id</span><span class="o">=</span><span class="mi">1370</span>
<span class="n">yhrun</span><span class="p">:</span> <span class="n">Job</span> <span class="n">step</span> <span class="n">aborted</span><span class="p">:</span> <span class="n">Waiting</span> <span class="n">up</span> <span class="n">to</span> <span class="mi">2</span> <span class="n">seconds</span> <span class="k">for</span> <span class="n">job</span> <span class="n">step</span> <span class="n">to</span> <span class="n">finish</span><span class="o">.</span>
<span class="n">Fatal</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">PMPI_Bcast</span><span class="p">:</span> <span class="n">Other</span> <span class="n">MPI</span> <span class="n">error</span><span class="p">,</span> <span class="n">error</span> <span class="n">stack</span><span class="p">:</span>
<span class="n">MPIDI_CH3I_Progress</span><span class="p">(</span><span class="mi">176</span><span class="p">):</span> <span class="n">progress</span> <span class="n">engine</span> <span class="n">failure</span>
<span class="n">In</span><span class="p">:</span> <span class="n">PMI_Abort</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Fatal</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">PMPI_Bcast</span><span class="p">:</span> <span class="n">Other</span> <span class="n">MPI</span> <span class="n">error</span><span class="p">,</span> <span class="n">error</span> <span class="n">stack</span><span class="p">:</span>
<span class="n">MPIDI_CH3I_Progress</span><span class="p">(</span><span class="mi">176</span><span class="p">):</span> <span class="n">progress</span> <span class="n">engine</span> <span class="n">failure</span><span class="p">)</span>
<span class="n">slurmd</span><span class="p">[</span><span class="n">cn1368</span><span class="p">]:</span> <span class="o">***</span> <span class="n">STEP</span> <span class="mf">2796179.0</span> <span class="n">KILLED</span> <span class="n">AT</span> <span class="mi">2015</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">12</span><span class="n">T11</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">12</span> <span class="n">WITH</span> <span class="n">SIGNAL</span> <span class="mi">9</span> <span class="o">***</span>
<span class="n">slurmd</span><span class="p">[</span><span class="n">cn1368</span><span class="p">]:</span> <span class="o">***</span> <span class="n">STEP</span> <span class="mf">2796179.0</span> <span class="n">KILLED</span> <span class="n">AT</span> <span class="mi">2015</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">12</span><span class="n">T11</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">12</span> <span class="n">WITH</span> <span class="n">SIGNAL</span> <span class="mi">9</span> <span class="o">***</span>
</pre></div>
</div>
<p>该错误提示一般是由 mpi 版本导致。解决方法：使用/vol6/source.sh 中的内容替换原~/.bashrc 中关于 intel 编译器、mpi 的路径。</p>
</div>
<div class="section" id="fatal-error-this-program-was-not-built-to-run-in-your-system">
<span id="fatal-error-this-program-was-not-built-to-run-in-your-system"></span><h2>程序运行报错：<code class="docutils literal notranslate"><span class="pre">Fatal</span> <span class="pre">Error:</span> <span class="pre">This</span> <span class="pre">program</span> <span class="pre">was</span> <span class="pre">not</span> <span class="pre">built</span> <span class="pre">to</span> <span class="pre">run</span> <span class="pre">in</span> <span class="pre">your</span> <span class="pre">system.</span></code><a class="headerlink" href="#fatal-error-this-program-was-not-built-to-run-in-your-system" title="永久链接至标题">¶</a></h2>
<p>报错问题：程序运行报错，<code class="docutils literal notranslate"><span class="pre">Fatal</span> <span class="pre">Error:</span> <span class="pre">This</span> <span class="pre">program</span> <span class="pre">was</span> <span class="pre">not</span> <span class="pre">built</span> <span class="pre">to</span> <span class="pre">run</span> <span class="pre">in</span> <span class="pre">your</span> <span class="pre">system.</span> <span class="pre">Please</span> <span class="pre">verify</span> <span class="pre">that</span> <span class="pre">both</span> <span class="pre">the</span> <span class="pre">operating</span> <span class="pre">system</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">processor</span> <span class="pre">support</span> <span class="pre">Intel(R)</span> <span class="pre">AVX.</span> <span class="pre">yhrun:</span> <span class="pre">error:</span> <span class="pre">cn2375:</span> <span class="pre">task</span> <span class="pre">0:</span> <span class="pre">Exited</span> <span class="pre">with</span> <span class="pre">exit</span> <span class="pre">code</span> <span class="pre">1</span></code></p>
<p>原因：该错误说明程序的编译时环境和运行时环境不一致，即程序编译时使用了支持  <code class="docutils literal notranslate"><span class="pre">AVX</span></code> 的选项，运行时的硬件环境不支持该 AVX 优化。一般这种情况发生是由于用户在编译程序时加入 <code class="docutils literal notranslate"><span class="pre">-xHOST/-xAVX</span></code>  选项（或是在安装软件时，系统自动读取到登陆节点上 CPU 的 <code class="docutils literal notranslate"><span class="pre">flag</span></code> 支持 <code class="docutils literal notranslate"><span class="pre">avx</span></code> ，故在编译软件时加入了 <code class="docutils literal notranslate"><span class="pre">-xHOST</span></code>），那程序就会根据登陆节点的 CPU 配置信息进行优化编译，然而程序的运行是在计算节点上，计算节点的 CPU配置信息可能不支持 AVX，就与登陆节点不同，就会报上面的提示错误。</p>
<p>解决方法：编译时去掉 <code class="docutils literal notranslate"><span class="pre">-xHOST/-xAVX</span></code> 选项，使用其他优化选项。</p>
<p>备注：-xHost will cause icc/icpc or icl to check the cpu information and find the highest level of extended instructions support to use.</p>
<p>天河登陆节点 ln1、ln2、ln3 上的 CPU 配置信息 <code class="docutils literal notranslate"><span class="pre">flag</span></code> 均无 <code class="docutils literal notranslate"><span class="pre">avx</span></code> ，ln8、ln9上均有 <code class="docutils literal notranslate"><span class="pre">avx</span></code> 。</p>
<p>如果在 ln8 或 ln9 上安装软件时，configure 后一定要检查下编译 flag 是否加入了 <code class="docutils literal notranslate"><span class="pre">-xHOST</span></code>，如果加入，请修改对应的 configure 文件，将 <code class="docutils literal notranslate"><span class="pre">-xHOST</span></code> 删除。</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="storage.html" title="存储问题"
             >下一页</a> |</li>
        <li class="right" >
          <a href="compile.html" title="编译问题"
             >上一页</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HPC Help v1.0 文档</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; 版权所有 2018, Mr.ZhengGang.
      由 <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5 创建。
    </div>
  </body>
</html>